"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[990,921],{2921:(o,t,e)=>{e.r(t),e.d(t,{default:()=>n});const r={name:"ProfileFormLayout"};const n=(0,e(1900).Z)(r,(function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("v-row",{staticClass:"pa-6",attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",md:"4"}},[e("h3",[o._t("title")],2),o._v(" "),o._t("description")],2),o._v(" "),e("v-col",[e("v-card",{attrs:{flat:""}},[e("v-card-text",[o._t("content")],2),o._v(" "),e("v-card-actions",[o._t("actions")],2)],1)],1)],1)}),[],!1,null,"64bb5b38",null).exports},2990:(o,t,e)=>{e.r(t),e.d(t,{default:()=>d});var r=e(2921);const n={name:"KCopyToClipboard",props:{copyData:{type:String,default:"",required:!1}},methods:{clipboardSuccessHandler:function(){var o=this;this.copy_to_clipboard_text="Copied",setTimeout((function(){o.copy_to_clipboard_text="Copy to clipboard"}),2e3)},clipboardErrorHandler:function(){var o=this;this.copy_to_clipboard_text="Error Occurred",setTimeout((function(){o.copy_to_clipboard_text="Copy to clipboard"}),2e3)}},data:function(){return{copy_to_clipboard_text:"Copy to clipboard"}}};var s=e(1900);const a=(0,s.Z)(n,(function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return o.copyData},expression:"() => copyData"},{name:"clipboard",rawName:"v-clipboard:success",value:o.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:o.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}]},[e("v-btn",{attrs:{color:"primary",ripple:!1,plain:""}},[o._v("\n\n        "+o._s(o.copy_to_clipboard_text)+"\n    ")])],1)}),[],!1,null,"2fd761ab",null).exports;const i={name:"KConfirmPassword",props:{title:{default:"Confirm Password"},content:{default:"For your security, please confirm your password to continue."},button:{default:"Confirm"}},components:{},data:function(){return{confirmingPassword:!1,form:{password:"",error:"",processing:!1},showPassword:!1}},methods:{startConfirmingPassword:function(){var o=this;axios.get(route("password.confirmation")).then((function(t){t.data.confirmed?o.$emit("confirmed"):(o.confirmingPassword=!0,setTimeout((function(){return o.$refs.password.focus()}),250))}))},confirmPassword:function(){var o=this;this.form.processing=!0,axios.post(route("password.confirm"),{password:this.form.password}).then((function(){o.form.processing=!1,o.closeModal(),o.$nextTick((function(){return o.$emit("confirmed")}))})).catch((function(t){o.form.processing=!1,o.form.error=t.response.data.errors.password[0],o.$refs.password.focus()}))},closeModal:function(){this.confirmingPassword=!1,this.form.password="",this.form.error=""}}};const c={name:"TwoFactorAuthenticationForm",components:{KConfirmPassword:(0,s.Z)(i,(function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("v-dialog",{attrs:{width:o.$vuetify.breakpoint.mdAndUp?"50%":"100%"},scopedSlots:o._u([{key:"activator",fn:function(t){t.on,t.attrs;return[e("span",{on:{click:o.startConfirmingPassword}},[o._t("default")],2)]}}],null,!0),model:{value:o.confirmingPassword,callback:function(t){o.confirmingPassword=t},expression:"confirmingPassword"}},[o._v(" "),e("v-card",[e("v-card-title",[o._v("\n            "+o._s(o.title)+"\n        ")]),o._v(" "),e("v-card-text",[o._v("\n            "+o._s(o.content)+"\n            "),e("v-text-field",{ref:"password",staticClass:"mt-1 block w-3/4",attrs:{placeholder:"Password",autofocus:"",outlined:"",type:o.showPassword?"text":"password","error-messages":o.form.error,autocomplete:"off","append-icon":o.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){o.showPassword=!o.showPassword}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&o._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.confirmPassword.apply(null,arguments)}},model:{value:o.form.password,callback:function(t){o.$set(o.form,"password",t)},expression:"form.password"}})],1),o._v(" "),e("v-card-actions",[e("v-spacer"),o._v(" "),e("v-btn",{staticClass:"ml-2",attrs:{color:"accent",disabled:o.form.processing},nativeOn:{click:function(t){return o.confirmPassword.apply(null,arguments)}}},[o._v("\n                "+o._s(o.button)+"\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports,KCopyToClipboard:a,ProfileFormLayout:r.default},computed:{twoFactorEnabled:function(){return!this.enabling&&this.$page.props.user.two_factor_enabled},recoveryCodesForCopy:function(){return this.recoveryCodes.join("\n")}},data:function(){return{enabling:!1,disabling:!1,qrCode:null,recoveryCodes:[],isRegenerating:!1,isLoadingRecoveryCodes:!1,copy_to_clipboard_text:"Copy to clipboard"}},methods:{regenerateRecoveryCodes:function(){var o=this;this.isRegenerating=!0,axios.post("/user/two-factor-recovery-codes").then((function(t){o.showRecoveryCodes()})).finally((function(){o.isRegenerating=!1}))},showQrCode:function(){var o=this;return axios.get("/user/two-factor-qr-code").then((function(t){o.qrCode=t.data.svg}))},showRecoveryCodes:function(){var o=this;return this.isLoadingRecoveryCodes=!0,axios.get("/user/two-factor-recovery-codes").then((function(t){o.recoveryCodes=t.data})).finally((function(){o.isLoadingRecoveryCodes=!1}))},disableTwoFactorAuthentication:function(){var o=this;this.disabling=!0,this.$inertia.delete("/user/two-factor-authentication",{preserveScroll:!0,onSuccess:function(){return o.disabling=!1}})},enableTwoFactorAuthentication:function(){var o=this;this.enabling=!0,this.$inertia.post("/user/two-factor-authentication",{},{preserveScroll:!0,onSuccess:function(){return Promise.all([o.showQrCode(),o.showRecoveryCodes()])},onFinish:function(){return o.enabling=!1}})}}};const d=(0,s.Z)(c,(function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("profile-form-layout",{scopedSlots:o._u([{key:"title",fn:function(){return[o._v(" Two Factor Authentication")]},proxy:!0},{key:"description",fn:function(){return[o._v("Add additional security to your account using two factor authentication.")]},proxy:!0},{key:"content",fn:function(){return[o.twoFactorEnabled?e("h3",{staticClass:"text-lg font-medium text-gray-900"},[o._v("\n            You have enabled two factor authentication.\n        ")]):e("h3",[o._v("\n            You have not enabled two factor authentication.\n        ")]),o._v(" "),e("div",{staticClass:"mt-3"},[e("p",[o._v("\n                When two factor authentication is enabled, you will be prompted for a secure, random token during\n                authentication. You may retrieve this token from your phone's Google Authenticator application.\n            ")])]),o._v(" "),o.twoFactorEnabled?e("div",[o.qrCode?e("div",[e("div",{staticClass:"mt-4 "},[e("p",{staticClass:"font-weight-bold"},[o._v("\n                        Two factor authentication is now enabled. Scan the following QR code using your phone's\n                        authenticator application.\n                    ")])]),o._v(" "),e("div",{staticClass:"mt-4",domProps:{innerHTML:o._s(o.qrCode)}})]):o._e(),o._v(" "),o.recoveryCodes.length>0?e("div",[e("div",{staticClass:"mt-4 "},[e("p",{staticClass:"font-weight-bold"},[o._v("\n                        Store these recovery codes in a secure password manager. They can be used to recover access\n                        to your account if your two factor authentication device is lost.\n                    ")])]),o._v(" "),e("div",o._l(o.recoveryCodes,(function(t){return e("div",{key:t},[o._v("\n                        "+o._s(t)+"\n                    ")])})),0),o._v(" "),e("k-copy-to-clipboard",{attrs:{"copy-data":o.recoveryCodesForCopy}})],1):o._e()]):o._e(),o._v(" "),e("div",{staticClass:"mt-5"},[o.twoFactorEnabled?e("div",[e("v-row",{attrs:{"no-gutters":""}},[e("v-spacer"),o._v(" "),e("k-confirm-password",{on:{confirmed:o.regenerateRecoveryCodes}},[o.recoveryCodes.length>0?e("v-btn",{staticClass:"mr-3",attrs:{color:"secondary",disabled:o.isRegenerating,loading:o.isRegenerating}},[o._v("\n                           Regenerate Recovery Codes\n                       ")]):o._e()],1),o._v(" "),e("k-confirm-password",{on:{confirmed:o.showRecoveryCodes}},[0===o.recoveryCodes.length?e("v-btn",{staticClass:"mr-3",attrs:{loading:o.isLoadingRecoveryCodes,disabled:o.isLoadingRecoveryCodes,color:"secondary"}},[o._v("\n                           Show Recovery Codes\n                       ")]):o._e()],1),o._v(" "),e("k-confirm-password",{on:{confirmed:o.disableTwoFactorAuthentication}},[e("v-btn",{attrs:{color:"error",loading:o.disabling,disabled:o.disabling}},[o._v("\n                           Disable\n                       ")])],1)],1)],1):e("div",[e("v-row",{attrs:{"no-gutters":""}},[e("v-spacer"),o._v(" "),e("k-confirm-password",{on:{confirmed:o.enableTwoFactorAuthentication}},[e("v-btn",{attrs:{color:"primary",type:"button",loading:o.enabling,disabled:o.enabling}},[o._v("\n                           Enable\n                       ")])],1)],1)],1)])]},proxy:!0}])})}),[],!1,null,"ae6b1634",null).exports},1900:(o,t,e)=>{function r(o,t,e,r,n,s,a,i){var c,d="function"==typeof o?o.options:o;if(t&&(d.render=t,d.staticRenderFns=e,d._compiled=!0),r&&(d.functional=!0),s&&(d._scopeId="data-v-"+s),a?(c=function(o){(o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(o=__VUE_SSR_CONTEXT__),n&&n.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(a)},d._ssrRegister=c):n&&(c=i?function(){n.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(o,t){return c.call(t),l(o,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,c):[c]}return{exports:o,options:d}}e.d(t,{Z:()=>r})}}]);